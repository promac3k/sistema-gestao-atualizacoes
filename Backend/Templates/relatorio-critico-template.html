<!DOCTYPE html>
<html lang="pt-PT">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{{tipoRelatorio}}</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 20px;
                color: #333;
                line-height: 1.6;
            }

            .header {
                text-align: center;
                border-bottom: 3px solid #dc3545;
                padding-bottom: 25px;
                margin-bottom: 40px;
                background: linear-gradient(135deg, #fff5f5, #ffebee);
            }

            .header h1 {
                color: #dc3545;
                margin: 0;
                font-size: 28px;
            }

            .alert {
                background-color: #f8d7da;
                color: #721c24;
                padding: 20px;
                border-radius: 8px;
                margin-bottom: 30px;
                border-left: 5px solid #dc3545;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .alert h3 {
                margin-top: 0;
                color: #721c24;
            }

            .section {
                margin-bottom: 45px;
                page-break-inside: avoid;
            }

            .section h2 {
                color: #dc3545;
                border-bottom: 2px solid #ddd;
                padding-bottom: 8px;
                font-size: 22px;
                margin-bottom: 20px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 15px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                background: white;
            }

            th,
            td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #ddd;
                font-size: 13px;
            }

            th {
                background-color: #f8d7da;
                font-weight: bold;
                color: #721c24;
                border-bottom: 2px solid #dc3545;
            }

            tr:hover {
                background-color: #fff5f5;
            }

            .critico-row {
                background-color: #fff5f5;
                border-left: 4px solid #dc3545;
            }

            .footer {
                margin-top: 50px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                text-align: center;
                color: #666;
                font-size: 12px;
            }

            .summary-stats {
                background: linear-gradient(135deg, #dc3545, #c82333);
                color: white;
                padding: 25px;
                border-radius: 12px;
                text-align: center;
                margin-bottom: 40px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            }

            .summary-stats h3 {
                margin: 0 0 10px 0;
                font-size: 32px;
            }

            .info-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 25px;
                margin-bottom: 40px;
            }

            .info-card {
                background: white;
                padding: 25px;
                border-radius: 12px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                border-left: 5px solid #dc3545;
                transition: transform 0.2s ease;
                margin-bottom: 15px;
            }

            .info-card:hover {
                transform: translateY(-2px);
            }

            .info-card h4 {
                color: #dc3545;
                margin: 0 0 10px 0;
                font-size: 16px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .info-card .value {
                font-size: 24px;
                font-weight: bold;
                color: #333;
                margin: 5px 0;
            }

            .info-card .description {
                font-size: 13px;
                color: #666;
                margin: 0;
            }

            .severity-indicator {
                display: inline-block;
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 11px;
                font-weight: bold;
                text-transform: uppercase;
            }

            .severity-critico {
                background-color: #dc3545;
                color: white;
            }

            .severity-alto {
                background-color: #fd7e14;
                color: white;
            }

            .severity-medio {
                background-color: #ffc107;
                color: #333;
            }

            .report-summary {
                background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                padding: 30px;
                border-radius: 15px;
                margin-bottom: 40px;
                border: 1px solid #dee2e6;
            }

            .report-summary h3 {
                color: #dc3545;
                margin: 0 0 15px 0;
                font-size: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .summary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }

            .summary-item {
                background: white;
                padding: 15px;
                border-radius: 8px;
                text-align: center;
                border: 1px solid #dee2e6;
            }

            .summary-item .number {
                font-size: 28px;
                font-weight: bold;
                margin-bottom: 5px;
            }

            .summary-item .label {
                font-size: 12px;
                color: #666;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            @media print {
                body {
                    margin: 0;
                    padding: 15px;
                    font-size: 12px;
                }

                .info-grid {
                    grid-template-columns: repeat(2, 1fr);
                }

                .info-card:hover {
                    transform: none;
                }

                .page-break-before {
                    page-break-before: always;
                }

                .avoid-page-break {
                    page-break-inside: avoid;
                }
            }
        </style>
    </head>
    <body>
        <div class="header">
            <h1>üö® {{tipoRelatorio}}</h1>
            <p><strong>Data de Gera√ß√£o:</strong> {{dataGeracao}}</p>
            {{#if periodoAnalise}}
            <p style="margin: 10px 0 0 0; font-size: 14px; color: #666">
                <strong>Per√≠odo de An√°lise:</strong> {{periodoAnalise}} {{#if
                totalDispositivos}} |
                <strong>Total de Dispositivos Analisados:</strong>
                {{totalDispositivos}} {{/if}}
            </p>
            {{else}}
            <p style="margin: 10px 0 0 0; font-size: 14px; color: #666">
                <strong>Relat√≥rio Gerado em:</strong> {{timestamp}} {{#if
                totalDispositivos}} |
                <strong>Dispositivos Analisados:</strong> {{totalDispositivos}}
                {{/if}}
            </p>
            {{/if}}
        </div>

        <div class="summary-stats">
            <h3>{{totalCriticos}}</h3>
            <p>Dispositivos Cr√≠ticos Identificados</p>
        </div>

        <!-- Resumo Executivo -->
        <div class="report-summary">
            <h3>üìä Resumo Executivo da Situa√ß√£o Cr√≠tica</h3>
            <p style="margin: 0 0 15px 0; color: #333; font-size: 14px">
                Este relat√≥rio identifica
                <strong>{{totalCriticos}} dispositivos</strong>
                em estado cr√≠tico que requerem aten√ß√£o imediata. A an√°lise
                revela problemas significativos que podem comprometer a
                seguran√ßa e operacionalidade da infraestrutura.
            </p>

            <div class="summary-grid">
                {{#if scoreMediaCriticidade}}
                <div class="summary-item">
                    <div class="number" style="color: #dc3545">
                        {{scoreMediaCriticidade}}
                    </div>
                    <div class="label">Score M√©dio de Criticidade</div>
                </div>
                {{/if}} {{#if dispositivosOffline}}
                <div class="summary-item">
                    <div class="number" style="color: #fd7e14">
                        {{dispositivosOffline}}
                    </div>
                    <div class="label">Dispositivos Offline</div>
                </div>
                {{/if}} {{#if atualizacoesPendentes}}
                <div class="summary-item">
                    <div class="number" style="color: #dc3545">
                        {{atualizacoesPendentes}}
                    </div>
                    <div class="label">Atualiza√ß√µes Cr√≠ticas Pendentes</div>
                </div>
                {{/if}} {{#if sistemaDesatualizados}}
                <div class="summary-item">
                    <div class="number" style="color: #856404">
                        {{sistemaDesatualizados}}
                    </div>
                    <div class="label">Sistemas Desatualizados</div>
                </div>
                {{/if}}
            </div>
        </div>

        <div class="section page-break-before">
            <h2>üìä Distribui√ß√£o por N√≠veis de Criticidade</h2>

            <!-- Distribui√ß√£o por N√≠veis de Criticidade -->
            <div class="info-grid avoid-page-break">
                <div class="info-card">
                    <h4>üî¥ Dispositivos Cr√≠ticos</h4>
                    <div class="value" style="color: #dc3545">
                        {{#if
                        nivelCritico}}{{nivelCritico}}{{else}}{{totalCriticos}}{{/if}}
                    </div>
                    <p class="description">
                        Dispositivos com score ‚â• 80 pontos que requerem a√ß√£o
                        imediata
                        <span class="severity-indicator severity-critico"
                            >Cr√≠tico</span
                        >
                    </p>
                </div>

                {{#if nivelAlto}}
                <div class="info-card">
                    <h4>üü† Dispositivos Alto Risco</h4>
                    <div class="value" style="color: #fd7e14">
                        {{nivelAlto}}
                    </div>
                    <p class="description">
                        Dispositivos com score entre 60-79 pontos
                        <span class="severity-indicator severity-alto"
                            >Alto</span
                        >
                    </p>
                </div>
                {{/if}} {{#if nivelMedio}}
                <div class="info-card">
                    <h4>üü° Dispositivos M√©dio Risco</h4>
                    <div class="value" style="color: #ffc107">
                        {{nivelMedio}}
                    </div>
                    <p class="description">
                        Dispositivos com score entre 40-59 pontos
                        <span class="severity-indicator severity-medio"
                            >M√©dio</span
                        >
                    </p>
                </div>
                {{/if}}

                <div class="info-card">
                    <h4>üìä Status do Sistema</h4>
                    <div class="value" style="color: #dc3545">
                        {{#if
                        tempoMedioOffline}}{{tempoMedioOffline}}{{else}}ATIVO{{/if}}
                    </div>
                    <p class="description">
                        {{#if tempoMedioOffline}} Tempo m√©dio que os
                        dispositivos cr√≠ticos est√£o desconectados {{else}}
                        Sistema de monitoramento ativo e funcional {{/if}}
                    </p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üö® Lista de Dispositivos Cr√≠ticos</h2>
            <table>
                <thead>
                    <tr>
                        <th style="width: 25%">Nome do Dispositivo</th>
                        <th style="width: 15%">Score de Criticidade</th>
                        <th style="width: 15%">N√≠vel</th>
                        <th style="width: 45%">Problemas Identificados</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each dispositivos}}
                    <tr class="critico-row">
                        <td><strong>{{nome}}</strong></td>
                        <td
                            style="color: {{cor}}; font-weight: bold; font-size: 16px;"
                        >
                            {{score}} pontos
                        </td>
                        <td style="color: {{cor}}; font-weight: bold;">
                            {{criticidade}}
                        </td>
                        <td>{{problemas}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>üìã Pr√≥ximos Passos Recomendados</h2>
            <div
                style="
                    background: #f8f9fa;
                    padding: 20px;
                    border-radius: 8px;
                    border-left: 4px solid #007bff;
                "
            >
                <ol style="margin: 0; padding-left: 20px">
                    <li>
                        <strong>Prioriza√ß√£o:</strong> Atender primeiro os
                        dispositivos com maior score de criticidade
                    </li>
                    <li>
                        <strong>Conectividade:</strong> Verificar dispositivos
                        offline e restabelecer comunica√ß√£o
                    </li>
                    <li>
                        <strong>Atualiza√ß√µes:</strong> Instalar atualiza√ß√µes
                        cr√≠ticas e importantes pendentes
                    </li>
                    <li>
                        <strong>Sistema Operacional:</strong> Atualizar sistemas
                        operacionais desatualizados
                    </li>
                    <li>
                        <strong>Monitoramento:</strong> Implementar
                        monitoramento cont√≠nuo para preven√ß√£o
                    </li>
                    <li>
                        <strong>Documenta√ß√£o:</strong> Registrar todas as a√ß√µes
                        tomadas para auditoria
                    </li>
                </ol>
            </div>
        </div>

        <div class="footer">
            <p>
                <strong
                    >Relat√≥rio de Dispositivos Cr√≠ticos - Sistema SCCM</strong
                >
            </p>
            <p>Timestamp: {{timestamp}}</p>
            <p style="color: #dc3545">
                <strong
                    >‚ö†Ô∏è CONFIDENCIAL - Este relat√≥rio cont√©m informa√ß√µes
                    cr√≠ticas de seguran√ßa</strong
                >
            </p>
        </div>
    </body>
</html>
